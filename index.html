<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset="utf-8">
    
    <title>Reason&#39;s blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta property="og:type" content="website">
<meta property="og:title" content="Reason&#39;s blog">
<meta property="og:url" content="https://reasoncai.github.io/index.html">
<meta property="og:site_name" content="Reason&#39;s blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Reason&#39;s blog">
    

    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    


</head>

<body>
    <div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">Reason&#39;s blog</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/avatar.png" />
                            <i class="fa fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="Search" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/avatar.png" />
            <h2 id="name">Reason</h2>
            <h3 id="title">Web Developer &amp; Designer</h3>
            <span id="location"><i class="fa fa-map-marker"></i>Guangzhou, China</span><br>
			<h3 id="contact">WeChat&amp;QQ : 403411876</h3>
            <!--<a id="follow" target="_blank" href="https://github.com/reasoncai/">FOLLOW</a> -->
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                27
                <span>posts</span>
            </div>
            <div class="article-info-block">
                27
                <span>tags</span>
            </div>
        </div>
        
    </div>
</aside>

            
            <section id="main">
    <article id="post-Java8-Optional的使用" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/09/28/Java8-Optional的使用/">Java8-Optional的使用</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/09/28/Java8-Optional的使用/">
            <time datetime="2017-09-27T16:34:14.000Z" itemprop="datePublished">2017-09-28</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/JAVA基础/">JAVA基础</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/java8/">java8</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><p>去掉烦人的NPE异常和非NULL判断代码</p>
<h3 id="1-三种构造函数"><a href="#1-三种构造函数" class="headerlink" title="1.三种构造函数"></a>1.三种构造函数</h3><ul>
<li>Optional.of(obj)  要求传入的对象不能为null,否则立刻报NPE异常</li>
<li><p>Optional.ofNullable(obj)  传 null 进到就得到 Optional.empty(), 非 null 就调用 Optional.of(obj)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">源码</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function">Optional&lt;T&gt; <span class="title">ofNullable</span><span class="params">(T value)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> value == <span class="keyword">null</span> ? empty() : of(value);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
<li><p>Optional.empty() 顾名思义value为null</p>
</li>
</ul>
<h3 id="2-常用方法"><a href="#2-常用方法" class="headerlink" title="2.常用方法"></a>2.常用方法</h3><h4 id="2-1-存在即返回，否则返回默认值oreElse-T-other"><a href="#2-1-存在即返回，否则返回默认值oreElse-T-other" class="headerlink" title="2.1.存在即返回，否则返回默认值oreElse(T other)"></a>2.1.存在即返回，否则返回默认值oreElse(T other)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">源码</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Return the value if present, otherwise return &#123;<span class="doctag">@code</span> other&#125;.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> other the value to be returned if there is no value present, may</div><div class="line">     * be null</div><div class="line">     * <span class="doctag">@return</span> the value, if present, otherwise &#123;<span class="doctag">@code</span> other&#125;</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">orElse</span><span class="params">(T other)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> value != <span class="keyword">null</span> ? value : other;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h4 id="2-2存在即返回-无则由函数（函数式编程）来产生orElseGet-Supplier-lt-extends-T-gt-other"><a href="#2-2存在即返回-无则由函数（函数式编程）来产生orElseGet-Supplier-lt-extends-T-gt-other" class="headerlink" title="2.2存在即返回, 无则由函数（函数式编程）来产生orElseGet(Supplier&lt;? extends T&gt; other)"></a>2.2存在即返回, 无则由函数（函数式编程）来产生orElseGet(Supplier&lt;? extends T&gt; other)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Return the value if present, otherwise invoke &#123;<span class="doctag">@code</span> other&#125; and return</div><div class="line"> * the result of that invocation.</div><div class="line"> *</div><div class="line"> * <span class="doctag">@param</span> other a &#123;<span class="doctag">@code</span> Supplier&#125; whose result is returned if no value</div><div class="line"> * is present</div><div class="line"> * <span class="doctag">@return</span> the value if present otherwise the result of &#123;<span class="doctag">@code</span> other.get()&#125;</div><div class="line"> * <span class="doctag">@throws</span> NullPointerException if value is not present and &#123;<span class="doctag">@code</span> other&#125; is</div><div class="line"> * null</div><div class="line"> */</div><div class="line"><span class="function"><span class="keyword">public</span> T <span class="title">orElseGet</span><span class="params">(Supplier&lt;? extends T&gt; other)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> value != <span class="keyword">null</span> ? value : other.get();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="2-3存在则返回，无则抛出异常orElseThrow-Supplier-lt-extends-X-gt-exceptionSupplier"><a href="#2-3存在则返回，无则抛出异常orElseThrow-Supplier-lt-extends-X-gt-exceptionSupplier" class="headerlink" title="2.3存在则返回，无则抛出异常orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)"></a>2.3存在则返回，无则抛出异常orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier)</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">  * Return the contained value, if present, otherwise throw an exception</div><div class="line">  * to be created by the provided supplier.</div><div class="line">  *</div><div class="line">  * <span class="doctag">@apiNote</span> A method reference to the exception constructor with an empty</div><div class="line">  * argument list can be used as the supplier. For example,</div><div class="line">  * &#123;<span class="doctag">@code</span> IllegalStateException::new&#125;</div><div class="line">  *</div><div class="line">  * <span class="doctag">@param</span> &lt;X&gt; Type of the exception to be thrown</div><div class="line">  * <span class="doctag">@param</span> exceptionSupplier The supplier which will return the exception to</div><div class="line">  * be thrown</div><div class="line">  * <span class="doctag">@return</span> the present value</div><div class="line">  * <span class="doctag">@throws</span> X if there is no value present</div><div class="line">  * <span class="doctag">@throws</span> NullPointerException if no value is present and</div><div class="line">  * &#123;<span class="doctag">@code</span> exceptionSupplier&#125; is null</div><div class="line">  */</div><div class="line"> <span class="keyword">public</span> &lt;X extends Throwable&gt; <span class="function">T <span class="title">orElseThrow</span><span class="params">(Supplier&lt;? extends X&gt; exceptionSupplier)</span> <span class="keyword">throws</span> X </span>&#123;</div><div class="line">     <span class="keyword">if</span> (value != <span class="keyword">null</span>) &#123;</div><div class="line">         <span class="keyword">return</span> value;</div><div class="line">     &#125; <span class="keyword">else</span> &#123;</div><div class="line">         <span class="keyword">throw</span> exceptionSupplier.get();</div><div class="line">     &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<h4 id="2-4若存在则进行一些操作"><a href="#2-4若存在则进行一些操作" class="headerlink" title="2.4若存在则进行一些操作"></a>2.4若存在则进行一些操作</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">  * If a value is present, invoke the specified consumer with the value,</div><div class="line">  * otherwise do nothing.</div><div class="line">  *</div><div class="line">  * <span class="doctag">@param</span> consumer block to be executed if a value is present</div><div class="line">  * <span class="doctag">@throws</span> NullPointerException if value is present and &#123;<span class="doctag">@code</span> consumer&#125; is</div><div class="line">  * null</div><div class="line">  */</div><div class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ifPresent</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; consumer)</span> </span>&#123;</div><div class="line">     <span class="keyword">if</span> (value != <span class="keyword">null</span>)</div><div class="line">         consumer.accept(value);</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<h4 id="2-5map函数"><a href="#2-5map函数" class="headerlink" title="2.5map函数"></a>2.5map函数</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span>&lt;U&gt; Optional&lt;U&gt; <span class="title">map</span><span class="params">(Function&lt;? <span class="keyword">super</span> T, ? extends U&gt; mapper)</span> </span>&#123;</div><div class="line">    Objects.requireNonNull(mapper);</div><div class="line">    <span class="keyword">if</span> (!isPresent())</div><div class="line">        <span class="keyword">return</span> empty();</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> Optional.ofNullable(mapper.apply(value));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>实例：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.cai.javademo.optional;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Optional;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by reason on 17/9/27.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OptionalTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        Student student = getNull();</div><div class="line">        Student defaultStudent = getStudent();</div><div class="line">        Optional&lt;Student&gt; studentOptional = Optional.ofNullable(defaultStudent);</div><div class="line">        Student student1 = studentOptional.orElse(getDefaultStudent());</div><div class="line">        System.out.println(student1);</div><div class="line">        Student student2 = studentOptional.orElseGet(() -&gt; getFuntionStudent());</div><div class="line">        System.out.println(student2);</div><div class="line">        Student student3 = studentOptional.orElseThrow(() -&gt; <span class="keyword">new</span> Exception(<span class="string">"空抛出自定义异常"</span>));</div><div class="line">        System.out.println(student3.toString());</div><div class="line"></div><div class="line">        <span class="comment">//若存在则进行某种操作（这里将名字改为modify）</span></div><div class="line">        studentOptional.ifPresent((x) -&gt; &#123;</div><div class="line">            x.setName(<span class="string">"modify"</span>);</div><div class="line">        &#125;);</div><div class="line">        System.out.println(studentOptional.get());</div><div class="line"></div><div class="line">        <span class="comment">//map函数(这里将获取名字并转大写)无限级联</span></div><div class="line">        String s = studentOptional.map(a -&gt; a.getName()).map(b -&gt; b.toUpperCase()).orElse(<span class="keyword">null</span>);</div><div class="line">        System.out.println(s);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Student <span class="title">getStudent</span><span class="params">()</span> </span>&#123;</div><div class="line">        Student student = <span class="keyword">new</span> Student();</div><div class="line">        student.setName(<span class="string">"normal"</span>);</div><div class="line">        student.setAge(<span class="number">10</span>);</div><div class="line">        <span class="keyword">return</span> student;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Student <span class="title">getNull</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Student <span class="title">getDefaultStudent</span><span class="params">()</span> </span>&#123;</div><div class="line">        Student student = <span class="keyword">new</span> Student();</div><div class="line">        student.setName(<span class="string">"default"</span>);</div><div class="line">        student.setAge(<span class="number">1</span>);</div><div class="line">        <span class="keyword">return</span> student;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Student <span class="title">getFuntionStudent</span><span class="params">()</span> </span>&#123;</div><div class="line">        Student student = <span class="keyword">new</span> Student();</div><div class="line">        student.setName(<span class="string">"Funtion"</span>);</div><div class="line">        student.setAge(<span class="number">129000</span>);</div><div class="line">        <span class="keyword">return</span> student;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>当student不为null时输出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Student&#123;name=&apos;normal&apos;, age=10&#125;</div><div class="line">Student&#123;name=&apos;normal&apos;, age=10&#125;</div><div class="line">Student&#123;name=&apos;normal&apos;, age=10&#125;</div><div class="line">Student&#123;name=&apos;modify&apos;, age=10&#125;</div><div class="line">MODIFY</div></pre></td></tr></table></figure></p>
<p>当student为null时输出<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Student&#123;name=&apos;default&apos;, age=1&#125;</div><div class="line">Student&#123;name=&apos;Funtion&apos;, age=129000&#125;</div><div class="line">Exception in thread &quot;main&quot; java.lang.Exception: 空抛出自定义异常</div><div class="line">	at com.cai.javademo.optional.OptionalTest.lambda$main$1(OptionalTest.java:17)</div><div class="line">	at java.util.Optional.orElseThrow(Optional.java:290)</div><div class="line">	at com.cai.javademo.optional.OptionalTest.main(OptionalTest.java:17)</div><div class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</div><div class="line">	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</div><div class="line">	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</div><div class="line">	at java.lang.reflect.Method.invoke(Method.java:498)</div><div class="line">	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:147)</div></pre></td></tr></table></figure></p>
<h3 id="3-总结"><a href="#3-总结" class="headerlink" title="3.总结"></a>3.总结</h3><ul>
<li>常用方法：</li>
<li>oreElse(T other)</li>
<li>orElseGet(Supplier&lt;? extends T&gt; other) </li>
<li>orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier) </li>
<li>map()</li>
<li>尽量不用isPresent()和get(),因为这样做与以前直接判断==null?没有什么区别。且用get()方法前要用isPresent()判断是否为null，过于啰嗦。</li>
<li>不要将Optional 类型用作属性或是方法参数，Optional 类型不可被序列化, 用作字段类型会出问题的。</li>
</ul>
<p>其实说了那么多，还不如看看jdk源码java.util.Optional来的简单。。。。。。</p>

        
        </div>
  <!--      <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://reasoncai.github.io/2017/09/28/Java8-Optional的使用/" data-id="cj839j4qw000mvdxdv62jp34g" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>-->
    </div>
    
</article>



    <article id="post-Java常量定义在interface中好还是定义在class好" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/09/17/Java常量定义在interface中好还是定义在class好/">Java常量定义在interface中好还是定义在class好</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/09/17/Java常量定义在interface中好还是定义在class好/">
            <time datetime="2017-09-16T16:30:58.000Z" itemprop="datePublished">2017-09-17</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/编码习惯/">编码习惯</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/java/">java</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <p>项目中经常需要定义一些常量，定义方法有以下几种：</p>
<h5 id="1-定义在interface中"><a href="#1-定义在interface中" class="headerlink" title="1.定义在interface中"></a>1.定义在interface中</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Constants</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> A = <span class="number">90</span>;</div><div class="line">    <span class="keyword">int</span> B = <span class="number">80</span>;</div><div class="line">    <span class="keyword">int</span> C = <span class="number">60</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>优点：接口中定义的”变量”, 其实就是常量, 接口中的”变量”默认都是 “public static final”类型，即为常量，因此接口可以省略”public static final”而直接写成 “type variable”，在interface和class中定义相同的常量, interface生成的class文件比class生成的class文件会更小, 而且更简洁, 效率更高。</p>
</li>
<li><p>缺点：接口定义常量, 虽不能实例化, 但能被实现。因此有这么一种设计模式”The constant interface pattern”. 所谓的”常量接口模式”,  就是其他类要使用接口中定义的常量, 就实现该接口. 我认为这是对接口的烂用。 接口中定义的常量应为所有类频繁使用的常量, 但并不是每个类都使用了接口中定义的所有常量, 因而导入了不必要的常量到这个类中, 并且导入后这个类的子类也会基础导入的常量, 这样会导致混乱, 应当避免此种用法。</p>
</li>
</ul>
<h5 id="2-定义在普通的class中"><a href="#2-定义在普通的class中" class="headerlink" title="2.定义在普通的class中"></a>2.定义在普通的class中</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Constants</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Constants</span><span class="params">()</span> </span>&#123;&#125;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> A = <span class="number">90</span>;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> B = <span class="number">80</span>;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> C = <span class="number">60</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>优点：final类修饰类防止被继承，私用构造方法防止实例化。</p>
</li>
<li><p>缺点：代码量比用接口的多。</p>
</li>
</ul>
<h5 id="3-定义在抽象类中"><a href="#3-定义在抽象类中" class="headerlink" title="3.定义在抽象类中"></a>3.定义在抽象类中</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Constants</span> </span>&#123;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> A = <span class="number">90</span>;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> B = <span class="number">80</span>;</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> C = <span class="number">60</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>优点：抽象类防止实例化。</li>
<li>缺点：”abstract class”的目的是为了让其他类继承, 因此语意别扭, 同样具有interface定义常量的缺点–即可以被继承。</li>
</ul>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ul>
<li>个人推荐用方法1-interface定义常量，代码更加简洁，生成的class文件更小, jvm不用考虑类的附加特性, 如方法重载等, 因而更为高效。当然方法2更加严谨。</li>
<li>建议使用常量的地方以 “接口.常量名” 的方式使用。不要使用静态导入import static XXX，因为代码的可读性会下降。</li>
<li>不要使用”常量接口模式”, 此模式会导致类中的常量混乱, 增加维护难度。</li>
</ul>

        
        </div>
  <!--      <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://reasoncai.github.io/2017/09/17/Java常量定义在interface中好还是定义在class好/" data-id="cj839j4qt000gvdxdwm9t28p7" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>-->
    </div>
    
</article>



    <article id="post-如何安全地暂停-恢复-终止线程-wait-notify" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/17/如何安全地暂停-恢复-终止线程-wait-notify/">如何安全地暂停-恢复-终止线程(wait/notify)</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/17/如何安全地暂停-恢复-终止线程-wait-notify/">
            <time datetime="2017-06-17T12:47:13.000Z" itemprop="datePublished">2017-06-17</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/多线程/">多线程</a>, <a class="tag-link" href="/tags/并发/">并发</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h4 id="1-过期的suspend-resume-stop"><a href="#1-过期的suspend-resume-stop" class="headerlink" title="1.过期的suspend(),resume(),stop()"></a>1.过期的suspend(),resume(),stop()</h4><p>这三个方法完成了线程的暂停、恢复和终止工作。但是是过期的方法，不建议使用。原因：以suspend()方法为例，在调用后，线程不会释放已经占用的资源（比如锁），而是占有着资源进入睡眠状态，这样容易引起死锁问题。同样，stop()方法在终止一个线程的时候不会保证线程的资源正常释放，通常是没有给予线程完成资源释放的工作的机会，因此会导致程序可能工作在不确定状态下。</p>
<h4 id="2-用标志位或中断来替代stop"><a href="#2-用标志位或中断来替代stop" class="headerlink" title="2.用标志位或中断来替代stop()"></a>2.用标志位或中断来替代stop()</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.cai.javademo.concurency;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 安全地终止线程</div><div class="line"> * Created by reason on 17/6/17.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Shutdown</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        Runner runner1 = <span class="keyword">new</span> Runner();</div><div class="line">        Thread countThread = <span class="keyword">new</span> Thread(runner1);</div><div class="line">        countThread.start();</div><div class="line">        <span class="comment">//方法1：中断</span></div><div class="line">        <span class="comment">//睡眠1秒，main线程对countThread进行中断，使其能感知中断而结束</span></div><div class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</div><div class="line">        countThread.interrupt();</div><div class="line"></div><div class="line">        Runner runner2 = <span class="keyword">new</span> Runner();</div><div class="line">        countThread = <span class="keyword">new</span> Thread(runner2);</div><div class="line">        countThread.start();</div><div class="line">        <span class="comment">//方法2：设置标志位（推荐）</span></div><div class="line">        <span class="comment">//睡眠1秒，main线程对countThread进行取消，使其感知on为false而结束</span></div><div class="line">        TimeUnit.SECONDS.sleep(<span class="number">1</span>);</div><div class="line">        runner2.cancel();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Runner</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">long</span> i;</div><div class="line">        <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">boolean</span> on = <span class="keyword">true</span>;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">while</span>(on &amp;&amp; !Thread.currentThread().isInterrupted())&#123;</div><div class="line">                i ++;</div><div class="line">            &#125;</div><div class="line">            System.out.println(<span class="string">"count i = "</span> + i);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cancel</span><span class="params">()</span> </span>&#123;</div><div class="line">            on = <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="3-用等待-通知机制-wait-notify-来替代suspend-和resume"><a href="#3-用等待-通知机制-wait-notify-来替代suspend-和resume" class="headerlink" title="3.用等待/通知机制(wait/notify)来替代suspend()和resume()"></a>3.用等待/通知机制(wait/notify)来替代suspend()和resume()</h4><h5 id="等待-通知的编程范式"><a href="#等待-通知的编程范式" class="headerlink" title="等待/通知的编程范式"></a>等待/通知的编程范式</h5><ul>
<li>等待方遵循如下原则：</li>
</ul>
<p>1）获取对象的锁</p>
<p>2）如果条件不满足，那么调用对象的wait()方法，被通知后仍要检查条件。</p>
<p>3）条件满足则执行对应的逻辑<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">对应的伪代码如下：</div><div class="line">synchronized(对象)&#123;</div><div class="line">    while(条件不满足)&#123;</div><div class="line">        对象.wait();</div><div class="line">    &#125;</div><div class="line">    对应的处理逻辑</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<ul>
<li>通知方遵循如下原则：</li>
</ul>
<p>1）获取对象的锁</p>
<p>2）改变条件</p>
<p>3）通知所有等待在对象上的线程<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">对应的伪代码如下：</div><div class="line">synchronized(对象)&#123;</div><div class="line">    改变条件</div><div class="line">    对象.notifyAll();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h5 id="3-1不带超时时间"><a href="#3-1不带超时时间" class="headerlink" title="3.1不带超时时间"></a>3.1不带超时时间</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.cai.javademo.concurency;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by reason on 17/6/17.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitNotify</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object lock = <span class="keyword">new</span> Object();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        Thread waitThread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Wait(), <span class="string">"WaitThread"</span>);</div><div class="line">        waitThread.start();</div><div class="line">        Thread.sleep(<span class="number">1000</span>);</div><div class="line">        Thread notifyThread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Notify(), <span class="string">"NotifyThread"</span>);</div><div class="line">        notifyThread.start();</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Wait</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="comment">//加锁,拥有lock的Monitor</span></div><div class="line">            <span class="keyword">synchronized</span> (lock) &#123;</div><div class="line">                <span class="comment">//当条件不满足时，继续wait,同时释放了lock的锁</span></div><div class="line">                <span class="keyword">while</span> (flag)&#123;</div><div class="line">                    System.out.println(Thread.currentThread() + <span class="string">" flag is true. wait @ "</span>+ <span class="keyword">new</span> Date());</div><div class="line">                    <span class="keyword">try</span> &#123;</div><div class="line">                        lock.wait();</div><div class="line">                    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="comment">//条件满足时，完成工作</span></div><div class="line">                System.out.println(Thread.currentThread() + <span class="string">" flag is false. running @ "</span>+ <span class="keyword">new</span> Date());</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Notify</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="comment">//加锁,拥有lock的Monitor</span></div><div class="line">            <span class="keyword">synchronized</span> (lock)&#123;</div><div class="line">                <span class="comment">//获取lock的锁，然后进行通知，通知时不会释放lock的锁</span></div><div class="line">                <span class="comment">//直到当前线程释放了lock后，waitThread才能从wait方法中返回</span></div><div class="line">                System.out.println(Thread.currentThread()+<span class="string">" hold lock.notify @ "</span>+<span class="keyword">new</span> Date());</div><div class="line">                flag = <span class="keyword">false</span>;</div><div class="line">                lock.notifyAll();</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    Thread.sleep(<span class="number">2000</span>);</div><div class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//Thread.yield();</span></div><div class="line">            <span class="comment">//再次加锁</span></div><div class="line">            <span class="keyword">synchronized</span> (lock)&#123;</div><div class="line">                System.out.println(Thread.currentThread()+<span class="string">" hold lock again. @"</span>+<span class="keyword">new</span> Date());</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    Thread.sleep(<span class="number">1000</span>);</div><div class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Thread[WaitThread,5,main] flag is true. wait @ Sat Jun 17 20:33:34 CST 2017</div><div class="line">Thread[NotifyThread,5,main] hold lock.notify @ Sat Jun 17 20:33:35 CST 2017</div><div class="line">Thread[NotifyThread,5,main] hold lock again. @Sat Jun 17 20:33:37 CST 2017</div><div class="line">Thread[WaitThread,5,main] flag is false. running @ Sat Jun 17 20:33:38 CST 2017</div></pre></td></tr></table></figure></p>
<h5 id="3-2等待超时模式"><a href="#3-2等待超时模式" class="headerlink" title="3.2等待超时模式"></a>3.2等待超时模式</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.cai.javademo.concurency;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by reason on 17/6/17.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WaitNotifyTimeOut</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> flag = <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Object lock = <span class="keyword">new</span> Object();</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</div><div class="line">        Thread waitThread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Wait(), <span class="string">"WaitThread"</span>);</div><div class="line">        waitThread.start();</div><div class="line">        <span class="comment">//睡眠时间大于超时时间，使其超时</span></div><div class="line">        Thread.sleep(<span class="number">5000</span>);</div><div class="line">        Thread notifyThread = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Notify(), <span class="string">"NotifyThread"</span>);</div><div class="line">        notifyThread.start();</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Wait</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</div><div class="line">        <span class="comment">//超时时间</span></div><div class="line">        <span class="keyword">private</span> <span class="keyword">long</span> remaining = <span class="number">2000</span> ;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="comment">//加锁,拥有lock的Monitor</span></div><div class="line">            <span class="keyword">synchronized</span> (lock) &#123;</div><div class="line">                    <span class="keyword">long</span> future = System.currentTimeMillis() + remaining;</div><div class="line">                    <span class="keyword">while</span>(<span class="keyword">true</span> &amp;&amp; remaining &gt; <span class="number">0</span>) &#123;</div><div class="line">                        System.out.println(Thread.currentThread() + <span class="string">" wait @ "</span> + <span class="keyword">new</span> Date() + flag);</div><div class="line">                        <span class="keyword">try</span> &#123;</div><div class="line">                            <span class="comment">//设置2秒超时返回</span></div><div class="line">                            lock.wait(remaining);</div><div class="line">                            remaining = future - System.currentTimeMillis();</div><div class="line">                        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                            e.printStackTrace();</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                System.out.println(Thread.currentThread() + <span class="string">" running @ "</span>+ <span class="keyword">new</span> Date()+flag);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Notify</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="comment">//加锁,拥有lock的Monitor</span></div><div class="line">            <span class="keyword">synchronized</span> (lock)&#123;</div><div class="line">                <span class="comment">//获取lock的锁，然后进行通知，通知时不会释放lock的锁</span></div><div class="line">                <span class="comment">//直到当前线程释放了lock后，waitThread才能从wait方法中返回</span></div><div class="line">                System.out.println(Thread.currentThread()+<span class="string">" hold lock.notify @ "</span>+<span class="keyword">new</span> Date());</div><div class="line">                flag = <span class="keyword">false</span>;</div><div class="line">                lock.notifyAll();</div><div class="line">                <span class="keyword">try</span> &#123;</div><div class="line">                    Thread.sleep(<span class="number">1000</span>);</div><div class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Thread[WaitThread,5,main] wait @ Sat Jun 17 20:36:07 CST 2017true</div><div class="line">Thread[WaitThread,5,main] running @ Sat Jun 17 20:36:09 CST 2017true</div><div class="line">Thread[NotifyThread,5,main] hold lock.notify @ Sat Jun 17 20:36:12 CST 2017</div></pre></td></tr></table></figure></p>

        
        </div>
  <!--      <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://reasoncai.github.io/2017/06/17/如何安全地暂停-恢复-终止线程-wait-notify/" data-id="cj839j4rs001svdxd6njw65ig" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>-->
    </div>
    
</article>



    <article id="post-mybatis模糊查询like如何写" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/12/mybatis模糊查询like如何写/">mybatis模糊查询like如何写</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/12/mybatis模糊查询like如何写/">
            <time datetime="2017-06-12T04:38:42.000Z" itemprop="datePublished">2017-06-12</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/mybatis/">mybatis</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h5 id="mysql-利用能连接多个字符串的contat，无"><a href="#mysql-利用能连接多个字符串的contat，无" class="headerlink" title="mysql(利用能连接多个字符串的contat，无||)"></a>mysql(利用能连接多个字符串的contat，无||)</h5><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">where username LIKE concat('%',#&#123;username&#125;,'%')</div><div class="line">where username LIKE concat('%',#&#123;username&#125;)</div><div class="line">where username LIKE "%"#&#123;username&#125;"%"</div></pre></td></tr></table></figure>
<h5 id="oracle-CONCAT只能连接两个字符串-可以用"><a href="#oracle-CONCAT只能连接两个字符串-可以用" class="headerlink" title="oracle(CONCAT只能连接两个字符串,可以用||)"></a>oracle(CONCAT只能连接两个字符串,可以用||)</h5><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">where username LIKE '%' || #&#123;username&#125; || '%' </div><div class="line">where username LIKE concat('%',concat(#&#123;username&#125;,'%'))（嵌套concat）</div></pre></td></tr></table></figure>
<h5 id="两者都支持（不推荐，-导致SQL注入）"><a href="#两者都支持（不推荐，-导致SQL注入）" class="headerlink" title="两者都支持（不推荐，$导致SQL注入）"></a>两者都支持（不推荐，$导致SQL注入）</h5><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">where username LIKE '%$&#123;username&#125;%'</div></pre></td></tr></table></figure>
<p>ps：当mysql的字段名和保留字冲突的时候如key，sql语句中的字段名需要加上反引号``来加以区别，反引号可以用Esc键下面那个按键在英文模式不按shift键打出来，注意，是反引号不是单引号，回车键左边那个是单引号。</p>

        
        </div>
  <!--      <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://reasoncai.github.io/2017/06/12/mybatis模糊查询like如何写/" data-id="cj839j4ra0018vdxdojuidfr8" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>-->
    </div>
    
</article>



    <article id="post-Docker实践系列4-Springboot与Docker整合" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 itemprop="name">
            <a class="article-title" href="/2017/06/06/Docker实践系列4-Springboot与Docker整合/">Docker实践系列4-Springboot与Docker整合</a>
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fa fa-calendar"></i>
        <a href="/2017/06/06/Docker实践系列4-Springboot与Docker整合/">
            <time datetime="2017-06-06T14:11:47.000Z" itemprop="datePublished">2017-06-06</time>
        </a>
    </div>


                        
    <div class="article-category">
    	<i class="fa fa-folder"></i>
        <a class="article-category-link" href="/categories/DOCKER/">DOCKER</a>
    </div>

                        
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/DOCKER/">DOCKER</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h4 id="1-添加Dockerfile"><a href="#1-添加Dockerfile" class="headerlink" title="1.添加Dockerfile"></a>1.添加Dockerfile</h4><p>这个文件放在src/main/resources资源目录下<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">FROM java</div><div class="line">MAINTAINER "cai"&lt;403411876@qq.com&gt;</div><div class="line">ADD @project.build.finalName@.jar app.jar</div><div class="line">EXPOSE 8080</div><div class="line">CMD java -jar app.jar</div></pre></td></tr></table></figure></p>
<ul>
<li>使用Docker官方提供的Java镜像，它是基于Openjdk制作的，也可以使用我们自己基于oracle jdk制作的镜像。</li>
<li>通过ADD命令将jar包添加到镜像中 。Springboot对maven的“资源过滤”特性进行了一些改进，我们需要使用@project.build.finalName@来获取jar包文件。</li>
<li>EXPOSE暴露8080端口</li>
<li>CMD执行启动命令</li>
</ul>
<h4 id="2-使用Maven构建Docker镜像。"><a href="#2-使用Maven构建Docker镜像。" class="headerlink" title="2.使用Maven构建Docker镜像。"></a>2.使用Maven构建Docker镜像。</h4><p>Spotify公司开源了一款docker-maven-plugin的Maven插件，我们可使用Maven命令来构建Docker镜像</p>
<p>将以下配置到pom.xml文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.spotify<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>docker-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.4.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">imageName</span>&gt;</span>$&#123;project.groupId&#125;/$&#123;project.artifactId&#125;:$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">imageName</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">dockerDirectory</span>&gt;</span>$&#123;project.build.outputDirectory&#125;/<span class="tag">&lt;/<span class="name">dockerDirectory</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">resources</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">resource</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">directory</span>&gt;</span>$&#123;project.build.directory&#125;<span class="tag">&lt;/<span class="name">directory</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">include</span>&gt;</span>$&#123;project.build.finalName&#125;.jar<span class="tag">&lt;/<span class="name">include</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">resource</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">resources</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>imageName:用于指定Docker镜像的完整名称</li>
<li>dockerDirectory:用于指定Dockerfile文件所在的目录,指定为${project.build.outputDirectory}是为了读取经maven资源过滤后的Dockerfile文件，该文件中的@project.build.finalName@占位符此时已经被替换为实际内容</li>
<li>resources/resource/directory:用于指定需要复制的跟目录，其中${project.build.directory}表示target目录。</li>
<li>resources/resource/include:用于指定需要复制的文件。即为Maven打包后生产的jar文件。</li>
</ul>
<p>执行mvn docker:build后，在target目录下生成了一个docker目录，该目录中不仅包含classes目录中的所有文件，还包含了一个打包生成的jar文件。随后，docker-maven-plugin插件就在docker目录下执行docker build命令来构建镜像。</p>
<p>如果打算将构建的镜像推送到Docker registry中，那么pom.xml可以定义其地址<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">docker.registry</span>&gt;</span>127.0.0.1:5000<span class="tag">&lt;/<span class="name">docker.registry</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>将此属性作物imagName的前缀，再将imageName改为<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">imageName</span>&gt;</span>$&#123;docker.registry&#125;/$&#123;project.groupId&#125;/$&#123;project.artifactId&#125;:$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">imageName</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>最后执行 mvn docker:build docker:push命令先构建后推送</p>
<p>查看命令帮助：mvn docker:help -Ddetail=true</p>
<h4 id="3-启动Springboot的docker容器"><a href="#3-启动Springboot的docker容器" class="headerlink" title="3.启动Springboot的docker容器"></a>3.启动Springboot的docker容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> docker run <span class="_">-d</span> -p 58080:8080 127.0.0.1:50000/com.cai/hello:1.0.0</span></div></pre></td></tr></table></figure>
<h4 id="4-调整docker容器内存限制"><a href="#4-调整docker容器内存限制" class="headerlink" title="4.调整docker容器内存限制"></a>4.调整docker容器内存限制</h4><p>查看容器运行情况<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> docker stats</span></div></pre></td></tr></table></figure></p>
<p>docker run的-m参数调整容器内存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ doceker run \</div><div class="line"><span class="_">-d</span> \</div><div class="line">-p 58080:8080 \</div><div class="line">-m 512m \</div><div class="line">127.0.0.1:50000/com.cai/hello:1.0.0</div></pre></td></tr></table></figure>

        
        </div>
  <!--      <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="https://reasoncai.github.io/2017/06/06/Docker实践系列4-Springboot与Docker整合/" data-id="cj839j4qk000bvdxdai1yyun4" class="article-share-link"><i class="fa fa-share"></i>Share</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>-->
    </div>
    
</article>



    <nav id="page-nav">
        <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
</section>
            
                <aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">recent</h3>
        <div class="widget">
            <ul id="recent-post" class="no-thumbnail">
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/JAVA基础/">JAVA基础</a></p>
                            <p class="item-title"><a href="/2017/09/28/Java8-Optional的使用/" class="title">Java8-Optional的使用</a></p>
                            <p class="item-date"><time datetime="2017-09-27T16:34:14.000Z" itemprop="datePublished">2017-09-28</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/编码习惯/">编码习惯</a></p>
                            <p class="item-title"><a href="/2017/09/17/Java常量定义在interface中好还是定义在class好/" class="title">Java常量定义在interface中好还是定义在class好</a></p>
                            <p class="item-date"><time datetime="2017-09-16T16:30:58.000Z" itemprop="datePublished">2017-09-17</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/06/17/如何安全地暂停-恢复-终止线程-wait-notify/" class="title">如何安全地暂停-恢复-终止线程(wait/notify)</a></p>
                            <p class="item-date"><time datetime="2017-06-17T12:47:13.000Z" itemprop="datePublished">2017-06-17</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/06/12/mybatis模糊查询like如何写/" class="title">mybatis模糊查询like如何写</a></p>
                            <p class="item-date"><time datetime="2017-06-12T04:38:42.000Z" itemprop="datePublished">2017-06-12</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/DOCKER/">DOCKER</a></p>
                            <p class="item-title"><a href="/2017/06/06/Docker实践系列4-Springboot与Docker整合/" class="title">Docker实践系列4-Springboot与Docker整合</a></p>
                            <p class="item-date"><time datetime="2017-06-06T14:11:47.000Z" itemprop="datePublished">2017-06-06</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">categories</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DOCKER/">DOCKER</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA基础/">JAVA基础</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/java框架/">java框架</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring/">spring</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/中间件/">中间件</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作日记/">工作日记</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/工作笔记/">工作笔记</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/架构/">架构</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/编码习惯/">编码习惯</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书笔记/">读书笔记</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/转载/">转载</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/转载/Spring-Boot/">Spring Boot</a><span class="category-list-count">1</span></li></ul></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">archives</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">5</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tags</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOP/">AOP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DOCKER/">DOCKER</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SPRING-CLOUD/">SPRING CLOUD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/">SQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring-Boot/">Spring Boot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java8/">java8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux命令/">linux命令</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/">mybatis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spring/">spring</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcp-ip/">tcp/ip</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/并发/">并发</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/序列化/">序列化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日志/">日志</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/缓存/">缓存</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/负载均衡/">负载均衡</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/集群/">集群</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高可用/">高可用</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">tag cloud</h3>
        <div class="widget tagcloud">
            <a href="/tags/AOP/" style="font-size: 10px;">AOP</a> <a href="/tags/DOCKER/" style="font-size: 16.67px;">DOCKER</a> <a href="/tags/SPRING-CLOUD/" style="font-size: 10px;">SPRING CLOUD</a> <a href="/tags/SQL/" style="font-size: 10px;">SQL</a> <a href="/tags/Spring-Boot/" style="font-size: 10px;">Spring Boot</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/java8/" style="font-size: 10px;">java8</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/linux命令/" style="font-size: 10px;">linux命令</a> <a href="/tags/mongodb/" style="font-size: 10px;">mongodb</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/php/" style="font-size: 10px;">php</a> <a href="/tags/redis/" style="font-size: 13.33px;">redis</a> <a href="/tags/spring/" style="font-size: 10px;">spring</a> <a href="/tags/tcp-ip/" style="font-size: 10px;">tcp/ip</a> <a href="/tags/多线程/" style="font-size: 16.67px;">多线程</a> <a href="/tags/并发/" style="font-size: 20px;">并发</a> <a href="/tags/序列化/" style="font-size: 10px;">序列化</a> <a href="/tags/数据库/" style="font-size: 13.33px;">数据库</a> <a href="/tags/日志/" style="font-size: 10px;">日志</a> <a href="/tags/缓存/" style="font-size: 10px;">缓存</a> <a href="/tags/负载均衡/" style="font-size: 13.33px;">负载均衡</a> <a href="/tags/集群/" style="font-size: 10px;">集群</a> <a href="/tags/高可用/" style="font-size: 10px;">高可用</a>
        </div>
    </div>

    
    <div id="toTop" class="fa fa-angle-up"></div>
</aside>
            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2017 reason<br>
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>